SrkaReviewStars = Class.create();
SrkaReviewStars.prototype = {
    initialize: function(f) {
        var e = this;
        e.ratingTable = $(f);
        e.ratings = {};
        e.html = "";
        this.ratingTable.hide();
        this.ratingTable.select("tbody > tr").each(function(k, i) {
            var g = k.select(".radio")[0].readAttribute("name");
            var j = k.select("th")[0].innerHTML;
            var h = [];
            k.select(".radio").each(function(l) {
                h.push(l.value)
            });
            e.ratings[g] = {
                code: g,
                label: j,
                options: h
            }
        });
        e.html += '<div id="srka-product-review-list" class="input-box">';
        for (var b in e.ratings) {
            var d = e.ratings[b]["code"].replace(/[\[]/g, "_").replace(/[\]]/g, "");
            e.html += '<div id="code-' + d + '" class="srka-rating-code">\n';
            //e.html += '  <div class="label">' + e.ratings[b]["label"] + "</div>\n";
            e.html += '  <ul class="options">\n';
            for (var a = 0; a < e.ratings[b]["options"].length; a++) {
                var c = "srka-" + e.ratings[b]["label"] + "_" + e.ratings[b]["options"][a];
                e.html += '     <li><a href="#" id="' + c + '" class="option" onmouseclick="reviewStars.select(\'' + e.ratings[b]["code"] + "', " + e.ratings[b]["options"][a] + '); return false;" onclick="reviewStars.select(\'' + e.ratings[b]["code"] + "', " + e.ratings[b]["options"][a] + '); return false;"></a></li>\n'
            }
            e.html += "  </ul>\n";
            e.html += '  <div style="clear: both;"></div>\n';
            e.html += "</div>\n"
        }
        e.html += "</div>";
        this.ratingTable.insert({
            after: e.html
        })
    },
    select: function(a, b) {
        var c = this.ratings[a]["options"];
        this.ratingTable.select('.radio[value="' + b + '"]')[0].checked = true;
        for (var d = 0; d < c.length; d++) {
            var f = "srka-" + this.ratings[a]["label"] + "_" + this.ratings[a]["options"][d];
            var e = f.replace("srka-", "");
            if (c[d] <= b) {
                $(f).addClassName("selected")
            } else {
                $(f).removeClassName("selected")
            }
        }
    }
};